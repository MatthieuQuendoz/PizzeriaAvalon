<!--
Sections animate in and out on scroll. Scroll up or down and the sections will wrap around after hitting the start or end. Uses GSAP for the animations.
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated Sections</title>
    <link rel="stylesheet" href="story.css?v=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Observer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
</head>

<body>
  <!-- Close button for returning to the main page -->
  <a href="index.html" class="close-button-story"><</a>

  <section class="first">
    <div class="outer">
      <div class="inner">
        <div class="bg one">
            <div class="story-container">
                <!-- Logo Section -->
                <div class="logo-section">
                    <img src="assets/ui/avalon-logo.png" alt="Avalon Logo" class="logo">
                    <div class="logo-text">
                        <span class="logo-pizzeria">Pizzeria</span>
                        <span class="logo-avalon">AVALON</span>
                    </div>
                </div>
    
                <!-- Main Title -->
                <div class="main-title">
                    <h1 id="where-everything">Where everything</h1>
                    <h1 id="began" class="began">BEGAN</h1>
                </div>
        
                <!-- Scroll Down -->
                <div class="scroll-down">
                    <span id="scroll-down">Scroll Down</span>
                    <div class="scroll-arrow">↓</div>
                </div>
        
                <!-- Decorative Stars -->
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star yellow-star-1">
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star yellow-star-2">
                <img src="assets/story/bgElement/brownStar.png" alt="" class="star brown-star-1">
                <img src="assets/story/bgElement/brownStar.png" alt="" class="star brown-star-2">
            </div>
      </div>
    </div>
  </section>


  <section class="second">
    <div class="outer">
      <div class="inner">
        <div class="bg">
            <div class="story-container">
                <div class="story-text front-text">
                    <span id="nonna-oriana" class="text-red">NONNA ORIANA</span>
                    <span id="opened-first" class="text-black">opened the first</span>
                    <div class="inline-text-container">
                        <span id="pizzeria" class="text-red">PIZZERIA</span>
                        <span id="in-a" class="text-location-inline">in a</span>
                    </div>
                    <div class="inline-text-container">
                        <span id="small-bar" class="text-black">small bar in</span>
                        <span id="veneto" class="text-red">VENETO</span>
                    </div>
                </div>
                <div class="story-text back-text" style="display: none;">
                  <span  id="tra-pizze"class="text-black"> Tra pizze, confusione e sogni più </span>
                  <span id="grandi" class="text-red">GRANDI</span>
                  <span id="piccola-pizzeria" class="text-black">di una piccola pizzeria, cresceva</span>
                  <span id="una-famiglia" class="text-red">UNA FAMIGLIA</span>.
                </div>
                
                
                <div class="polaroid-container">
                  <div class="card-container">
                    <div class="card" id="flip-card">
                        <div class="tap-icon">
                            <i class="fas fa-hand-pointer"></i>
                        </div>
                        <div class="card-front">
                            <img src="assets/story/polaroid1.png" alt="Fronte">
                        </div>
                        <div class="card-back">
                            <img src="assets/story/polaroid2.png" alt="Retro">
                        </div>
                    </div>
                  </div>
                </div>
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star content-yellow-star-1">
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star content-yellow-star-2">
            </div>
        </div>
      </div>
    </div>
  </section>


  <section class="third">
    <div class="outer">
      <div class="inner">
        <div class="bg">
            <div class="story-container">
                <div class="story-text story-text-section3">
                    <div class="inline-text-container">
                        <span id="after" class="text-location-inline-2">After</span>
                        <span id="fifteen-years" class="text-red">15 YEARS</span>
                    </div>
                    <span id="in-veneto" class="text-black">in Veneto Oriana</span>
                    <span id="decided-to-move" class="text-black">decided to move to</span>
                    <span id="aosta" class="text-red">AOSTA</span>
                </div>

                <div class="journey-map">
                    <img src="assets/story/percorso.png" alt="Journey Path" class="path">
                    <img src="assets/story/macchina.png" alt="Car" class="car">
                </div>
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star yellow-star-1">
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star yellow-star-2">
                <img src="assets/story/bgElement/brownStar.png" alt="" class="star brown-star-1">

                <div class="quote">
                    <p id="quote1-line1">Sometimes changing home</p>
                    <p id="quote1-line2">brings fresh energy!</p>
                </div>
            </div>
        </div>
      </div>
    </div>
  </section>



  <section class="fourth">
    <div class="outer">
      <div class="inner">
        <div class="bg">
            <div class="story-container">
                <div class="story-text front-text-fourth">
                    <span id="in-aosta" class="text-black">Settled in Aosta,</span>
                    <div class="inline-text-container">
                        <span id="oriana-create" class="text-location-inline-2">Oriana created</span>
                        <span id="pizzeria-avalon" class="text-red">AVALON</span>
                    </div>
                    <span id="with-the-help-of-her" class="text-black">with the help of her</span>
                    <span id="childrens" class="text-red-2">childrens</span>
                </div>
                <div class="story-text back-text-fourth" style="display: none;">
                    <span id="the-name" class="text-black">The name</span>
                    <span id="avalon-2" class="text-red">AVALON</span>
                    <span id="was-a-tribute" class="text-black">was a tribute to her favourite</span>
                    <span id="book" class="text-red">BOOK: </span>
                    <span id="the-mists-of-avalon" class="text-black">"The Mists of Avalon"</span>

                </div>

                <div class="polaroid-container">
                    <div class="card-container">
                        <div class="card" id="flip-card-fourth">
                            <div class="tap-icon">
                                <i class="fas fa-hand-pointer"></i>
                            </div>
                            <div class="card-front">
                                <img src="assets/story/polaroid5.png" alt="Fronte">
                            </div>
                            <div class="card-back">
                                <img src="assets/story/polaroid6.png" alt="Retro">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Decorative Stars -->
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star fourth-yellow-star-1">
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star fourth-yellow-star-2">           
              </div>
        </div>
      </div>
    </div>
  </section>


  <!--sto sistemando sta parteeee-->

  <section class="fifth">
    <div class="outer">
      <div class="inner">
        <div class="bg">
          <div class="story-container">
            <div class="story-text story-text-section5">
              <span id="sonia-and-jean" class="text-black">Sonia and </span>
              <span id="jean-paul" class="text-black">Jean Paul turned</span>
                <div class="inline-text-container">
                  <span id="avalon" class="text-black">Avalon</span>
                  <span id="into-truly" class="text-location-inline">into a truly</span>
                </div>
              <span id="special-place" class="text-red-2">special place</span>    
          </div>

          <div class="tap-icon">
            <i class="fas fa-hand-pointer"></i>
        </div>
           
            <img src="assets/story/polaroid4.png" alt="Nonna Oriana's First Pizzeria" class="polaroid4">
            <img src="assets/story/polaroid3.png" alt="Nonna Oriana's First Pizzeria" class="polaroid3" onclick="fadeOut(this)">
            
            <!-- Decorative stars -->
            <img src="assets/story/bgElement/yellowStar.png" alt="" class="star content-yellow-star-1">
            <img src="assets/story/bgElement/yellowStar.png" alt="" class="star content-yellow-star-2">
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="sixth">
    <div class="outer">
      <div class="inner">
        <div class="bg one">
            <div class="story-container">
    
                <!-- Main Title -->
                <div class="final-title">
                  <h1 id="journeyContinues" class="final1">The journey continues</h1>
                    <h1 id="moreToDiscover" class="final2">There's more to discover</h1>
                </div>
        
                <nav class="navigation">
                  <a href="menu.html" id="menu" class="nav-button">Menu</a> 
                  <a href="game.html" id="game" class="nav-button">Game</a>
                </nav>

                <a href="index.html">
                <div class="final-logo">
                  <img src="assets/ui/avalon-logo.png" alt="Avalon Logo" class="logo">
                </div>
                </a>

                <!-- Decorative Stars -->
                <img src="assets/story/bgElement/yellowStar.png" alt="" class="star yellow-star-1">
                <img src="assets/story/bgElement/brownStar.png" alt="" class="star brown-star-1">
            </div>
      </div>
    </div>
  </section>


  <script src="story-translations.js"></script>
  <script src="story.js"></script>
  
  <script>
    // Direct star rotation on scroll
    document.addEventListener('DOMContentLoaded', function() {
      // Get all stars
      const stars = document.querySelectorAll('.star');
      let rotation = 0;
      let lastScrollY = window.scrollY;
      
      // Make stars visible
      stars.forEach(star => {
        star.style.opacity = "1";
      });
      
      // Add scroll event listener
      window.addEventListener('scroll', function() {
        // Determine scroll direction and speed
        const scrollDirection = window.scrollY > lastScrollY ? 1 : -1;
        const scrollSpeed = Math.abs(window.scrollY - lastScrollY);
        lastScrollY = window.scrollY;
        
        // Update rotation based on scroll
        rotation += scrollDirection * scrollSpeed * 0.5;
        
        // Apply rotation to each star
        stars.forEach(star => {
          star.style.transform = `rotate(${rotation}deg)`;
        });
      });
    });
    
    // Function to toggle opacity of the clicked element
    function fadeOut(element) {
      element.style.transition = "opacity 2s ease";
      
      // Find the associated tap icon (sibling of the polaroid)
      const tapIcon = element.parentElement.querySelector('.tap-icon');

      if (element.style.opacity === "0") {
        element.style.opacity = "1";
        element.classList.remove("hidden-display");
        if (tapIcon) tapIcon.style.display = "block"; // Show tap icon
      } else {
        element.style.opacity = "0";
        if (tapIcon) tapIcon.style.display = "none"; // Hide tap icon immediately

        setTimeout(() => {
          if (element.style.opacity === "0") {
            element.classList.add("hidden-display");
          }
        }, 2000);
      }
    }
  </script>
</body>
</html>